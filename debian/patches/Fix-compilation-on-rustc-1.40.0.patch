From: Federico Mena Quintero <federico@gnome.org>
Date: Sat, 22 Jul 2023 18:35:35 -0600
Subject: Fix compilation on rustc 1.40.0

Origin: upstream, 2.50.9, commit:555bba1ea4412d237410147c01c876ec4bd78bed
Bug-Debian: https://bugs.debian.org/1041810
---
 rsvg_internals/src/allowed_url.rs | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/rsvg_internals/src/allowed_url.rs b/rsvg_internals/src/allowed_url.rs
index ffa9a23..596df6e 100644
--- a/rsvg_internals/src/allowed_url.rs
+++ b/rsvg_internals/src/allowed_url.rs
@@ -170,7 +170,7 @@ impl fmt::Display for AllowedUrlError {
     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
         use AllowedUrlError::*;
         match self {
-            HrefParseError(e) => write!(f, "URL parse error: {e}"),
+            HrefParseError(e) => write!(f, "URL parse error: {}", e),
             BaseRequired => write!(f, "base required"),
             DifferentUriSchemes => write!(f, "different URI schemes"),
             DisallowedScheme => write!(f, "disallowed scheme"),
@@ -373,7 +373,7 @@ mod tests {
 
     #[test]
     fn disallows_queries() {
-        assert!(matches!(
+        assert!(matches::matches!(
             AllowedUrl::from_href(
                 ".?../../../../../../../../../../etc/passwd",
                 Some(url_from_test_fixtures("../tests/fixtures/loading/bar.svg")).as_ref(),
@@ -423,11 +423,11 @@ mod tests {
         println!("cwd: {:?}", std::env::current_dir());
         let base_url = url_from_test_fixtures("../tests/fixtures/loading/bar.svg");
 
-        assert!(matches!(
+        assert!(matches::matches!(
             AllowedUrl::from_href(".", Some(&base_url)),
             Err(AllowedUrlError::NotSiblingOrChildOfBaseFile)
         ));
-        assert!(matches!(
+        assert!(matches::matches!(
             AllowedUrl::from_href(".#../../../../../../../../../../etc/passwd", Some(&base_url)),
             Err(AllowedUrlError::NoFragmentIdentifierAllowed)
         ));
@@ -439,7 +439,7 @@ mod tests {
         // This is because they should have been stripped before calling that function,
         // by the Iri machinery.
 
-        assert!(matches!(
+        assert!(matches::matches!(
             AllowedUrl::from_href("bar.svg#fragment", Some(Url::parse("https://example.com/foo.svg").unwrap()).as_ref()),
             Err(AllowedUrlError::NoFragmentIdentifierAllowed)
         ));
